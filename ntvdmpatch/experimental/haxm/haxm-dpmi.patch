--- NT4\private\mvdm\softpc.new\host\src\nt_inthk.c
+++ nt\private\mvdm\softpc.new\host\src\nt_inthk.c
49c49
< #if defined(CCPU) || !defined(PROD)
---
> #if defined(CCPU) || defined(HAXM) || !defined(PROD)
76c76
< #if defined(CCPU) || !defined(PROD)
---
> #if defined(CCPU) || defined(HAXM) || !defined(PROD)
114c114
< #ifdef CCPU
---
> #if defined(CCPU) || defined(HAXM)
139c139
< #if defined(CCPU) || !defined(PROD)
---
> #if defined(CCPU) || defined(HAXM) || !defined(PROD)
177c177
< #ifdef CCPU
---
> #if defined(CCPU) || defined(HAXM)
203c203
< #if defined(CCPU) || !defined(PROD)
---
> #if defined(CCPU) || defined(HAXM) || !defined(PROD)
241c241
< #ifdef CCPU
---
> #if defined(CCPU) || defined(HAXM)
--- NT4\private\mvdm\softpc.new\host\inc\nt_inthk.h
+++ nt\private\mvdm\softpc.new\host\inc\nt_inthk.h
27c27
< #ifdef CCPU
---
> #if defined(CCPU) || defined(HAXM)
35c35
< #ifdef CCPU
---
> #if defined(CCPU) || defined(HAXM)
--- NT4\private\mvdm\dpmi32\dpmiint.c
+++ nt\private\mvdm\dpmi32\dpmiint.c
106a107,111
> #ifdef HAXM
> 	{extern VOID HaxmSetProtectedModeInterrupt(USHORT IntNumber, USHORT Flags);
> 	HaxmSetProtectedModeInterrupt(IntNumber, Handlers[IntNumber].Flags);
> 	if (!fDpmiIntsHaveBeenHooked) EnableIntHooks();}
> #endif      //i386
--- NT4\private\mvdm\dpmi32\sources.inc
+++ nt\private\mvdm\dpmi32\sources.inc
56a57,59
> !if "$(HAXM)" != ""
> C_DEFINES=-DHAXM
> !endif
